<layout>
    <!-- date et heure -->
    <component type="datetime" format="%d/%m/%Y %H:%M:%S" cache="false" size="128" x="40" y="40"/>

    <!-- vitesse sol en km/h -->
    <composite x="6940" y="3560" name="speed">
       <component type="msi" metric="speed" textsize="56" needle="1" units="kph" size="640" end="80" yellow="80" green="80"/>
       <component type="metric" metric="speed" units="kph" dp="0" size="144" x="320"  y="480" align="centre"/>
       <component type="metric_unit" metric="speed" units="kph" size="72"  x="320"  y="640" align="centre">{:~P}</component>
    </composite>

    <!-- bpm -->
    <composite x="7600" y="40" name="bpm">
        <component type="metric_unit" metric="hr" x="-280" y="0" size="64" align="right">{:~P}</component>
        <component type="icon" x="-256" y="0" file="heartbeat.png" size="160"/>
        <component type="metric" x="-280" y="72" metric="hr" dp="0" size="128" align="right"/>
       <composite x="-400" y="200">
          <composite x="-40" name="bpm_min">
             <component type="text" size="48" align="right">min</component>
             <component type="custom_calc" y="40" size="72" dp="0"  expression="precalc.get('min_hr', 0)" align="right"/>
          </composite>
          <composite x="100" name="bpm_max">
             <component type="text" size="48" align="right">max</component>
             <component type="custom_calc" y="40" size="72" dp="0"  expression="precalc.get('max_hr', 0)" align="right"/>
          </composite>
       </composite>
    </composite>

    <!-- altitude -->
    <composite x="7600" y="440" name="alt">
       <component type="metric_unit" metric="alt" x="-280" y="0" size="64" align="right">{:~P}</component>
       <component type="icon" x="-256" y="0" file="mountain.png" size="160"/>
       <component type="metric" metric="alt" x="-280" y="72" dp="0" size="128" align="right" />
       <composite x="-440" y="200">
          <composite x="0" name="alt-min">
             <component type="text" size="48" align="right">min</component>
             <component type="custom_calc" y="40" size="72" dp="0" expression="precalc.get('min_alt', 0)" align="right"/>
          </composite>
          <composite x="160" name="alt_max">
             <component type="text" size="48" align="right">max</component>
             <component type="custom_calc" y="40" size="72" dp="0" expression="precalc.get('max_alt', 0)" align="right"/>
          </composite>
       </composite>
    </composite>

    <!-- dénivelé -->
    <composite x="7600" y="840" name="deniv">
       <component type="text" x="-280" size="64" align="right">m</component>
       <component type="icon" x="-256" y="0" file="slope.png" size="160" />
       <component type="custom-calc" x="-280" y="72" expression="precalc.get('total_gain', 0)" label="D+" dp="0" size="128" align="right" />
       <component type="custom-calc" x="-280" y="200" expression="precalc.get('total_loss', 0)" label="D-" dp="0" size="128" align="right" />
    </composite>

    <composite x="7600" y="1240" name="vario">
       <component type="text" x="-280" size="64" align="right">m/s</component>
       <component type="icon" x="-256" y="0" file="slope-triangle.png" size="160" />
       <component type="custom-calc" x="-280" y="72" dp="2" size="128" align="right" expression="(grad / 10) * (speed / 3.6)"/>
    </composite>

    <!-- carte -->
    <translate x="40" y="3400">
       <frame  width="880" height="880" cr="80">
          <component type="journey_map" size="880" opacity="0.7"  />
       </frame>
       <!-- distance -->
       <component type="metric_unit" metric="odo" x="480" y="720" size="64" align="right">{:~P}</component>
       <component type="metric" metric="odo"  align="right" x="480" y="800" size="80"/>
    </translate>

    <composite x="960" y="3400" name="deco/attero">
       <component type="text" size="64">Deco (m)</component>
       <component type="custom-calc" y="60" expression="state.setdefault('alt_start', alt)" dp="0" size="128" />

       <component type="text" y="240" size="64">Attero (m)</component>
        <component type="custom-calc" y="320" expression="precalc.get('min_alt', 0)" dp="0" size="128"  />
    </composite>
</layout>
